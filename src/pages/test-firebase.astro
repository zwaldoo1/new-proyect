---
import { db } from "../firebase/firebaseConfig.js";
import { collection, addDoc, getDocs } from "firebase/firestore";
---

<html lang="es">
  <head>
    <title>Test Firebase</title>
  </head>
  <body>
    <h1>Probando Firebase en Astro</h1>
    <p>Abre la consola (F12) para ver si se conectó bien.</p>

    <script type="module">
      import { collection, addDoc, getDocs } from "firebase/firestore";
      import { db } from "../firebase/firebaseConfig";

      async function testFirebase() {
        try {
          await addDoc(collection(db, "equipos"), {
            nombre: "Francisco FC",
            timestamp: new Date()
          });
          console.log("✅ Documento agregado correctamente");
        } catch (e) {
          console.error("❌ Error agregando documento:", e);
        }

        const snapshot = await getDocs(collection(db, "equipos"));
        snapshot.forEach((doc) => {
          console.log("📄 Documento:", doc.id, doc.data());
        });
      }

      testFirebase();
    </script>
  </body>
</html>
